<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Cross-architecture, no-std memory barriers."><title>mem_barrier - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-b7b9f40b.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="mem_barrier" data-themes="" data-resource-suffix="" data-rustdoc-version="1.95.0-nightly (905b92696 2026-01-31)" data-channel="nightly" data-search-js="search-fb33671b.js" data-stringdex-js="stringdex-b897f86f.js" data-settings-js="settings-170eb4bf.js" ><script src="../static.files/storage-f9617a14.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-12f88f4f.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-f7c3ffd8.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-eab170b8.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc mod crate"><a class="skip-main-content" href="#main-content">Skip to main content</a><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">Crate mem_barrier</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../mem_barrier/index.html">mem_<wbr>barrier</a><span class="version">0.1.0</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section id="rustdoc-toc"><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#examples" title="Examples">Examples</a></li><li><a href="#supported-architectures" title="Supported architectures">Supported architectures</a></li><li><a href="#cargo-features" title="Cargo features">Cargo features</a></li><li><a href="#related-crates" title="Related crates">Related crates</a></li></ul><h3><a href="#enums">Crate Items</a></h3><ul class="block"><li><a href="#enums" title="Enums">Enums</a></li><li><a href="#functions" title="Functions">Functions</a></li></ul></section><div id="rustdoc-modnav"></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content" tabindex="-1"><div class="main-heading"><h1>Crate <span>mem_<wbr>barrier</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/mem_barrier/lib.rs.html#1-317">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Cross-architecture, no-std memory barriers.</p>
<p>When compiling with optimizations, the compiler may try to improve performance by reordering independent memory accesses and instructions.
Modern CPUs use similar techniques for improving performance, such as out-of-order execution.
Memory barriers affect both the compiler and the CPU by restricting reordering of certain memory operations across these barriers respective to other CPUs or devices, allowing proper communication with them.</p>
<p>To insert a memory barrier, use the <a href="fn.mem_barrier.html" title="fn mem_barrier::mem_barrier"><code>mem_barrier</code></a> function.</p>
<p>The memory barriers provided by this crate are similar to the <a href="https://www.kernel.org/doc/html/latest/core-api/wrappers/memory-barriers.html">Linux kernel memory barriers</a>.
For more details on <em>that</em> API, also see the <a href="https://www.kernel.org/doc/html/latest/dev-tools/lkmm/index.html"><em>Linux Kernel Memory Consistency Model</em> (LKMM)</a>.</p>
<h2 id="examples"><a class="doc-anchor" href="#examples">§</a>Examples</h2>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>mem_barrier::{BarrierKind, BarrierType, mem_barrier};

mem_barrier(BarrierKind::Mmio, BarrierType::General);</code></pre></div><h2 id="supported-architectures"><a class="doc-anchor" href="#supported-architectures">§</a>Supported architectures</h2><div><table><thead><tr><th>Architecture</th><th><code>target_arch</code></th><th>Supported</th></tr></thead><tbody>
<tr><td>AArch64</td><td><code>aarch64</code></td><td>✅</td></tr>
<tr><td>RISC-V RV32</td><td><code>riscv32</code></td><td>✅</td></tr>
<tr><td>RISC-V RV64</td><td><code>riscv64</code></td><td>✅</td></tr>
<tr><td>x86</td><td><code>x86</code></td><td>✅</td></tr>
<tr><td>x86-64</td><td><code>x86_64</code></td><td>✅</td></tr>
</tbody></table>
</div><h2 id="cargo-features"><a class="doc-anchor" href="#cargo-features">§</a>Cargo features</h2>
<p>This crate has the following Cargo features:</p>
<ul>
<li><code>nightly</code>—Disabled by default, this feature enables memory barrier implementations based on unstable, nightly-only Rust features.</li>
<li><code>stdarch</code>—Enabled by default, this feature enables memory barrier implementations based on <a href="https://doc.rust-lang.org/nightly/core/arch/index.html" title="mod core::arch"><code>core::arch</code></a> intrinsics.
If available, these intrinsics replace the fallback implementations based on inline assembly.</li>
</ul>
<h2 id="related-crates"><a class="doc-anchor" href="#related-crates">§</a>Related crates</h2>
<p>Several crates provide alternative approaches to memory barriers:</p>
<ul>
<li><a href="https://docs.rs/membarrier">membarrier</a> provides OS-based process-wide memory barriers.</li>
<li><a href="https://docs.rs/mbarrier">mbarrier</a> closely resembles Linux kernel memory barriers by providing <code>mb</code>, <code>rmb</code>, and <code>wmb</code>.
It also provides <code>smp_mb</code>, <code>smp_rmb</code>, and <code>smp_wmb</code>, which either are the same as the non-SMP functions or fall back to compiler fences, depending on a crate feature.
It does not, however, distinguish between MMIO-suitable, SMP-suitable, and DMA-suitable memory barriers.</li>
</ul>
</div></details><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><dl class="item-table"><dt><a class="enum" href="enum.BarrierKind.html" title="enum mem_barrier::BarrierKind">Barrier<wbr>Kind</a></dt><dd>The kind of a memory barrier.</dd><dt><a class="enum" href="enum.BarrierType.html" title="enum mem_barrier::BarrierType">Barrier<wbr>Type</a></dt><dd>The type of a memory barrier.</dd></dl><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">§</a></h2><dl class="item-table"><dt><a class="fn" href="fn.mem_barrier.html" title="fn mem_barrier::mem_barrier">mem_<wbr>barrier</a></dt><dd>A memory barrier.</dd></dl></section></div></main></body></html>